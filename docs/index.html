<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>doc-test</title><meta name="description" content="Documentation for doc-test"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">doc-test</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<h2>doc-test</h2></div>
<div class="tsd-panel tsd-typography">
<a href="#práctica-10---apis-asíncronas-de-gestión-del-sistema-de-ficheros-creación-de-procesos-y-creación-de-sockets-de-nodejs" id="práctica-10---apis-asíncronas-de-gestión-del-sistema-de-ficheros-creación-de-procesos-y-creación-de-sockets-de-nodejs" style="color: inherit; text-decoration: none;">
  <h1>Práctica 10 - APIs asíncronas de gestión del sistema de ficheros, creación de procesos y creación de sockets de Node.js</h1>
</a>
<p>Ismael Martín Herrera  <em><a href="mailto:alu0101397375@ull.edu.es">alu0101397375@ull.edu.es</a></em></p>

<a href="#índice" id="índice" style="color: inherit; text-decoration: none;">
  <h2>Índice</h2>
</a>
<ol>
<li><a href="#introducci%C3%B3n">Introducción</a></li>
<li><a href="#ejercicio-1">Ejercicio 1</a></li>
<li><a href="#ejercicio-2">Ejercicio 2</a></li>
<li><a href="#ejercicio-3">Ejercicio 3</a></li>
<li><a href="#ejercicios-pe">Ejercicios PE</a></li>
<li><a href="#conclusi%C3%B3n">Conclusión</a></li>
<li><a href="#referencias">Referencias</a></li>
</ol>

<a href="#introducción" id="introducción" style="color: inherit; text-decoration: none;">
  <h2>Introducción</h2>
</a>

<a href="#ejercicio-1" id="ejercicio-1" style="color: inherit; text-decoration: none;">
  <h2>Ejercicio 1</h2>
</a>
<pre><code class="language-ts"><span class="hl-0">import</span><span class="hl-1"> {</span><span class="hl-2">access</span><span class="hl-1">, </span><span class="hl-2">constants</span><span class="hl-1">, </span><span class="hl-2">watch</span><span class="hl-1">} </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;fs&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1"> !== </span><span class="hl-4">3</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Please, specify a file&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">filename</span><span class="hl-1"> = </span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">[</span><span class="hl-4">2</span><span class="hl-1">];</span><br/><br/><span class="hl-1">  </span><span class="hl-5">access</span><span class="hl-1">(</span><span class="hl-2">filename</span><span class="hl-1">, </span><span class="hl-2">constants</span><span class="hl-1">.</span><span class="hl-7">F_OK</span><span class="hl-1">, (</span><span class="hl-2">err</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`File </span><span class="hl-6">${</span><span class="hl-2">filename</span><span class="hl-6">}</span><span class="hl-3"> does not exist`</span><span class="hl-1">);</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Starting to watch file </span><span class="hl-6">${</span><span class="hl-2">filename</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><br/><span class="hl-1">      </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">watcher</span><span class="hl-1"> = </span><span class="hl-5">watch</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">[</span><span class="hl-4">2</span><span class="hl-1">]);</span><br/><br/><span class="hl-1">      </span><span class="hl-2">watcher</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;change&#39;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`File </span><span class="hl-6">${</span><span class="hl-2">filename</span><span class="hl-6">}</span><span class="hl-3"> has been modified somehow`</span><span class="hl-1">);</span><br/><span class="hl-1">      });</span><br/><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`File </span><span class="hl-6">${</span><span class="hl-2">filename</span><span class="hl-6">}</span><span class="hl-3"> is no longer watched`</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">}</span>
</code></pre>
<p><strong>Traza de ejecución</strong></p>
<p>La ejecución comienza añadiendo en la pila de llamadas <code> console.log(`Starting to watch file ${filename}`)</code>, puesto que ya existe el fichero sobre el que se quiere poner atención, en este sentido la salida por la consola es <code>Starting to watch file file.txt</code>. A continuación, en la pila de llamadas se añade el <code>watcher</code>, este elemento contiene un manejador que se ejecuta cada vez que sucede un determinado evento.  En este sentido, el siguiente paso consiste en añadir <code>watcher.on</code> al registro de eventos, una vez que <code>watcher.on</code> está en el registro de eventos este tiene como objetivo &quot;observar&quot; los cambios en el citado fichero, por tanto, cada vez que se realiza una modificación sobre el fichero se cumple el evento. Posteriormente, sin haber realizado aún ninguna modificación en el fichero se introduce en la pila de llamadas <code> console.log(`File ${filename} is no longer watched`);</code>, y por consiguiente al ejecutarse y ser extraído de la pila, se muestra por la consola <code>File file.txt is no longer watched</code>. A continuación, al realizar la primera modificación en el fichero, se emite un evento <code>chage</code> detectado por <code>watcher.on</code> con lo que se añade el correspondiente <code>console.log(`File ${filename} has been modified somehow`);</code> a la cola de manejadores. En este sentido, el <code>bucle de eventos</code> es el encargado de mover los manejadores a la pila de llamadas, siempre que la pila de llamadas esté vacía. Por tanto, en este caso, como la pila está vacía se añade <code>console.log(`File ${filename} has been modified somehow`);</code>, con lo que se imprime por consola <code>File file.txt has been modified somehow</code>. Cabe añadir que en el registro de evento se sigue a la espera que otra posible modificación del fichero. Finalmente, se vuelve a modificar el fichero y sucede el mismo proceso anterior, expuesto al modificar el fichero. Cabe añadir que el programa no acaba nunca de ejecutarse debido a que el <code>watcher</code>, continua siempre &quot;observando&quot; el fichero. </p>

<a href="#¿qué-hace-la-función-access" id="¿qué-hace-la-función-access" style="color: inherit; text-decoration: none;">
  <h3>¿Qué hace la función access?</h3>
</a>
<p>La función <code>access()</code> prueba si el usuario tiene permisos para abrir el archivo o directorio especificado. A la citada función se le pasan los siguientes argumentos: </p>
<p><code>access(path, mode, callback)</code></p>
<ul>
<li><code>path</code>: se corresponde con la ruta del archivo o directorio.</li>
<li><code>mode</code>: entero opcional que especifica las comprobaciones de accesibilidad que se realizarán.</li>
<li><code>callback</code>: función que se invoca en caso de error de alguna de las comprobaciones.</li>
</ul>

<a href="#¿para-qué-sirve-el-objeto-constants" id="¿para-qué-sirve-el-objeto-constants" style="color: inherit; text-decoration: none;">
  <h3>¿Para qué sirve el objeto constants?</h3>
</a>
<p>Devuelve un objeto que contiene constantes de uso común para las operaciones del sistema de archivos.</p>

<a href="#ejercicio-2" id="ejercicio-2" style="color: inherit; text-decoration: none;">
  <h2>Ejercicio 2</h2>
</a>
<p>El ejercico 2 pedía desarrollar una aplicación que proporcione información sobre el número de líneas, palabras o caracteres que contiene un fichero de texto. En este sentido, había que realizar dos desarrollos de la misma aplicación, uno de ellos utilizando el método <code>pipe</code>: </p>
<pre><code class="language-ts"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-5">fileInfo</span><span class="hl-1">(</span><span class="hl-2">fileName</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">,</span><span class="hl-2">linesNumber</span><span class="hl-1">: </span><span class="hl-8">boolean</span><span class="hl-1">, </span><span class="hl-2">wordsNumber</span><span class="hl-1">: </span><span class="hl-8">boolean</span><span class="hl-1">, </span><span class="hl-2">charsNumber</span><span class="hl-1">: </span><span class="hl-8">boolean</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">linesNumber</span><span class="hl-1"> === </span><span class="hl-6">true</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">lines</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">( </span><span class="hl-3">&#39;grep&#39;</span><span class="hl-1">, [</span><span class="hl-3">&#39;-c&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;^&#39;</span><span class="hl-1">, </span><span class="hl-2">fileName</span><span class="hl-1">]);</span><br/><span class="hl-1">    </span><span class="hl-2">lines</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">pipe</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">wordsNumber</span><span class="hl-1"> === </span><span class="hl-6">true</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">fileContent</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-3">&#39;cat&#39;</span><span class="hl-1">, [</span><span class="hl-2">fileName</span><span class="hl-1">]);</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">wc</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-3">&#39;wc&#39;</span><span class="hl-1">, [</span><span class="hl-3">&#39;-w&#39;</span><span class="hl-1">]);</span><br/><span class="hl-1">    </span><span class="hl-2">fileContent</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">pipe</span><span class="hl-1">(</span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-2">stdin</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">pipe</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">charsNumber</span><span class="hl-1"> === </span><span class="hl-6">true</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">fileContent</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-3">&#39;cat&#39;</span><span class="hl-1">, [</span><span class="hl-2">fileName</span><span class="hl-1">]);</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">wc</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-3">&#39;wc&#39;</span><span class="hl-1">, [</span><span class="hl-3">&#39;-c&#39;</span><span class="hl-1">]);</span><br/><span class="hl-1">    </span><span class="hl-2">fileContent</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">pipe</span><span class="hl-1">(</span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-2">stdin</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">pipe</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>En este primer desarrollo, en el caso del recuento de líneas he usado el comando <code>grep</code> puesto que devuelve el número de líneas exacto, en el caso de <code>wc</code> devolvería una línea menos. Por otra parte, para contar el número de palabras y el número de caracteres he usado el comando cat, y a continuación he redigido su salida a la entrada estándar del comando <code>wc</code>. </p>
<p>Por otra parte, también se pedía realizar el mismo desarrollo pero sin usar el citado método <code>pipe</code>, por lo que he seguido una estrategia basada en la creación de subprocesos y sus correspondiente manejadores, así como el uso del método <code>write</code> de un <code>stream</code>. </p>
<pre><code class="language-ts"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-5">fileInfo</span><span class="hl-1">(</span><span class="hl-2">fileName</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">,</span><span class="hl-2">linesNumber</span><span class="hl-1">: </span><span class="hl-8">boolean</span><span class="hl-1">, </span><span class="hl-2">wordsNumber</span><span class="hl-1">: </span><span class="hl-8">boolean</span><span class="hl-1">, </span><span class="hl-2">charsNumber</span><span class="hl-1">: </span><span class="hl-8">boolean</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">linesNumber</span><span class="hl-1"> === </span><span class="hl-6">true</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">lines</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">( </span><span class="hl-3">&#39;grep&#39;</span><span class="hl-1">, [</span><span class="hl-3">&#39;-c&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;^&#39;</span><span class="hl-1">, </span><span class="hl-2">fileName</span><span class="hl-1">]);</span><br/><span class="hl-1">    </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">linesOutput</span><span class="hl-1"> = </span><span class="hl-4">0</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">lines</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">info</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-2">linesOutput</span><span class="hl-1"> = </span><span class="hl-2">info</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">lines</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;close&#39;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> { </span><span class="hl-9">// Manejador</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Número de líneas: </span><span class="hl-6">${</span><span class="hl-2">linesOutput</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">wordsNumber</span><span class="hl-1"> === </span><span class="hl-6">true</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">cat</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-3">&#39;cat&#39;</span><span class="hl-1">, [</span><span class="hl-3">&#39;src/ejercicio-1/file.txt&#39;</span><span class="hl-1">]);</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-2">cat</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">data</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">wc</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-3">&#39;wc&#39;</span><span class="hl-1">, [</span><span class="hl-3">&#39;-w&#39;</span><span class="hl-1">]);</span><br/><span class="hl-1">      </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-2">stdin</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-2">stdin</span><span class="hl-1">.</span><span class="hl-5">end</span><span class="hl-1">();</span><br/><span class="hl-1">      </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">data</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Número de palabras: </span><span class="hl-6">${</span><span class="hl-2">data</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">      }); </span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">charsNumber</span><span class="hl-1"> === </span><span class="hl-6">true</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">cat</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-3">&#39;cat&#39;</span><span class="hl-1">, [</span><span class="hl-3">&#39;src/ejercicio-1/file.txt&#39;</span><span class="hl-1">]);</span><br/><span class="hl-1">  </span><br/><span class="hl-1">    </span><span class="hl-2">cat</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">data</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">wc</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-3">&#39;wc&#39;</span><span class="hl-1">, [</span><span class="hl-3">&#39;-c&#39;</span><span class="hl-1">]);</span><br/><span class="hl-1">      </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-2">stdin</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-2">stdin</span><span class="hl-1">.</span><span class="hl-5">end</span><span class="hl-1">();</span><br/><span class="hl-1">      </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">data</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Número de caracteres: </span><span class="hl-6">${</span><span class="hl-2">data</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">      }); </span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Finalmente, tal y como pedía el enunciado he realizado una implementación de entrada por comandos mediante el paquete <code>yargs</code>, que es igual para ambos casos, tanto con <code>pipe</code> como sin dicho método. </p>
<pre><code class="language-ts"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-5">commandInterface</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">commands</span><span class="hl-1"> = </span><span class="hl-5">hideBin</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-5">yargs</span><span class="hl-1">(</span><span class="hl-2">commands</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-5">command</span><span class="hl-1">(</span><span class="hl-3">&#39;info&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;Obtein file info&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-2">file:</span><span class="hl-1"> {</span><br/><span class="hl-1">   </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;file&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">   </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">   </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-2">l:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;lines&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">false</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-2">w:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;words&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">false</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-2">c:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;chars&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">false</span><br/><span class="hl-1">  }</span><br/><span class="hl-1"> }, (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">lines</span><span class="hl-1"> = </span><span class="hl-6">false</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">words</span><span class="hl-1"> = </span><span class="hl-6">false</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">chars</span><span class="hl-1"> = </span><span class="hl-6">false</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">l</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-2">lines</span><span class="hl-1"> = </span><span class="hl-6">true</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">w</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-2">words</span><span class="hl-1"> = </span><span class="hl-6">true</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">c</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-2">chars</span><span class="hl-1"> = </span><span class="hl-6">true</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">   </span><span class="hl-5">fileInfo</span><span class="hl-1">(</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">file</span><span class="hl-1">, </span><span class="hl-2">lines</span><span class="hl-1">, </span><span class="hl-2">words</span><span class="hl-1">, </span><span class="hl-2">chars</span><span class="hl-1">);</span><br/><span class="hl-1"> })</span><br/><span class="hl-1"> .</span><span class="hl-5">help</span><span class="hl-1">()</span><br/><span class="hl-1"> .</span><span class="hl-2">argv</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-5">commandInterface</span><span class="hl-1">();</span>
</code></pre>

<a href="#ejercicio-3" id="ejercicio-3" style="color: inherit; text-decoration: none;">
  <h2>Ejercicio 3</h2>
</a>
<p>En el ejercicio 3 se pide la creación de una aplicación para el almacenamiento de funkos, basado en la pŕactica anterior, pero siguiendo el modelo <code>cliente-servidor</code>. En este sentido, he desarrollado dos clases que heredan de <code>EventEmiter</code> para poder emitir eventos tanto en el servidor como en el cliente, esto con el objetivo de emitir una evento cada vez que se detecte un mensaje completo. En relación a la detección de mensajes completos, he seguido el mismo &quot;protocolo&quot; que se usa en los apuntes, es decir, considerar un mensaje acabado al encontrar un &#39;\n&#39;. </p>
<pre><code class="language-ts"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-8">Client</span><span class="hl-1"> </span><span class="hl-6">extends</span><span class="hl-1"> </span><span class="hl-8">EventEmitter</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">client</span><span class="hl-1">: </span><span class="hl-8">net</span><span class="hl-1">.</span><span class="hl-8">Socket</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">commands</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">[];</span><br/><br/><span class="hl-1">  </span><span class="hl-6">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-6">super</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">client</span><span class="hl-1"> = </span><span class="hl-5">connect</span><span class="hl-1">({</span><span class="hl-2">port:</span><span class="hl-1"> </span><span class="hl-4">60301</span><span class="hl-1">});</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">commands</span><span class="hl-1"> = </span><span class="hl-5">hideBin</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-5">add</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-5">list</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-5">read</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-5">update</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-5">remove</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">wholeData</span><span class="hl-1"> = </span><span class="hl-3">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">dataChunk</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">wholeData</span><span class="hl-1"> += </span><span class="hl-2">dataChunk</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">messageLimit</span><span class="hl-1"> = </span><span class="hl-2">wholeData</span><span class="hl-1">.</span><span class="hl-5">indexOf</span><span class="hl-1">(</span><span class="hl-3">&#39;</span><span class="hl-10">\n</span><span class="hl-3">&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-0">while</span><span class="hl-1"> (</span><span class="hl-2">messageLimit</span><span class="hl-1"> !== -</span><span class="hl-4">1</span><span class="hl-1">) { </span><br/><span class="hl-1">        </span><span class="hl-2">wholeData</span><span class="hl-1"> = </span><span class="hl-2">wholeData</span><span class="hl-1">.</span><span class="hl-5">substring</span><span class="hl-1">(</span><span class="hl-4">0</span><span class="hl-1">, </span><span class="hl-2">messageLimit</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-5">emit</span><span class="hl-1">(</span><span class="hl-3">&#39;response&#39;</span><span class="hl-1">, </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">(</span><span class="hl-2">wholeData</span><span class="hl-1">));</span><br/><span class="hl-1">        </span><span class="hl-2">messageLimit</span><span class="hl-1"> = </span><span class="hl-2">wholeData</span><span class="hl-1">.</span><span class="hl-5">indexOf</span><span class="hl-1">(</span><span class="hl-3">&#39;</span><span class="hl-10">\n</span><span class="hl-3">&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><span class="hl-2">wholeData</span><span class="hl-1"> = </span><span class="hl-3">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;end&#39;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Connection closed&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  ...</span>
</code></pre>
<p><em>Parte de la clase Client</em></p>
<pre><code class="language-ts"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-8">Server</span><span class="hl-1"> </span><span class="hl-6">extends</span><span class="hl-1"> </span><span class="hl-8">EventEmitter</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-6">super</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-2">net</span><span class="hl-1">.</span><span class="hl-5">createServer</span><span class="hl-1">((</span><span class="hl-2">connection</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&#39;A client has connected.&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">      </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">wholeData</span><span class="hl-1"> = </span><span class="hl-3">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">dataChunk</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">wholeData</span><span class="hl-1"> += </span><span class="hl-2">dataChunk</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">messageLimit</span><span class="hl-1"> = </span><span class="hl-2">wholeData</span><span class="hl-1">.</span><span class="hl-5">indexOf</span><span class="hl-1">(</span><span class="hl-3">&#39;</span><span class="hl-10">\n</span><span class="hl-3">&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-0">while</span><span class="hl-1"> (</span><span class="hl-2">messageLimit</span><span class="hl-1"> !== -</span><span class="hl-4">1</span><span class="hl-1">) { </span><br/><span class="hl-1">          </span><span class="hl-2">wholeData</span><span class="hl-1"> = </span><span class="hl-2">wholeData</span><span class="hl-1">.</span><span class="hl-5">substring</span><span class="hl-1">(</span><span class="hl-4">0</span><span class="hl-1">, </span><span class="hl-2">messageLimit</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-5">emit</span><span class="hl-1">(</span><span class="hl-3">&#39;request&#39;</span><span class="hl-1">, </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">(</span><span class="hl-2">wholeData</span><span class="hl-1">), </span><span class="hl-2">connection</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">messageLimit</span><span class="hl-1"> = </span><span class="hl-2">wholeData</span><span class="hl-1">.</span><span class="hl-5">indexOf</span><span class="hl-1">(</span><span class="hl-3">&#39;</span><span class="hl-10">\n</span><span class="hl-3">&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-2">wholeData</span><span class="hl-1"> = </span><span class="hl-3">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">      });</span><br/><br/><span class="hl-1">      </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;close&#39;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&#39;A client has disconnected.&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    }).</span><span class="hl-5">listen</span><span class="hl-1">(</span><span class="hl-4">60301</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Waiting for clients to connect.&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">}</span>
</code></pre>
<p>Además de crear las clases expuestas previamente, también he creado dos tipos para &quot;estandarizar&quot; las comunicaciones <code>cliente-servidor</code>. Por un lado, el tipo <code>ResponseType</code>, para las respuestas del servidor a las peticiones del cliente. </p>
<pre><code class="language-ts"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-8">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-2">type</span><span class="hl-1">: </span><span class="hl-3">&#39;add&#39;</span><span class="hl-1"> | </span><span class="hl-3">&#39;update&#39;</span><span class="hl-1"> | </span><span class="hl-3">&#39;remove&#39;</span><span class="hl-1"> | </span><span class="hl-3">&#39;read&#39;</span><span class="hl-1"> | </span><span class="hl-3">&#39;list&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">success</span><span class="hl-1">: </span><span class="hl-8">boolean</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">funkoPops</span><span class="hl-1">?: </span><span class="hl-8">Funko</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">funkoPopsList</span><span class="hl-1">?: </span><span class="hl-8">Funko</span><span class="hl-1">[];</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Y por otro lado, el tipo <code>RequestType</code>, para las peticiones del cliente al servidor. </p>
<pre><code class="language-ts"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-8">RequestType</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-2">type</span><span class="hl-1">: </span><span class="hl-3">&#39;add&#39;</span><span class="hl-1"> | </span><span class="hl-3">&#39;update&#39;</span><span class="hl-1"> | </span><span class="hl-3">&#39;remove&#39;</span><span class="hl-1"> | </span><span class="hl-3">&#39;read&#39;</span><span class="hl-1"> | </span><span class="hl-3">&#39;list&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">user</span><span class="hl-1">?: </span><span class="hl-8">string</span><br/><span class="hl-1">  </span><span class="hl-2">funkoPop</span><span class="hl-1">?: </span><span class="hl-8">string</span><br/><span class="hl-1">  </span><span class="hl-2">id</span><span class="hl-1">?: </span><span class="hl-8">number</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Finalmente, también se pedía cambiar la lógica de gestión de ficheros de la API síncrona de Node JS a la asíncrona. Sin embargo, tras intentarlo no he conseguido hacerlo, puesto que a la hora de leer un directorio de un usuario y tratar de leer cada uno de sus ficheros para crear los funkos y guardarlos en un array, las operaciones se realizaban pero, el array realmente se queda <code>undefined</code>. </p>

<a href="#ejercicios-pe" id="ejercicios-pe" style="color: inherit; text-decoration: none;">
  <h2>Ejercicios PE</h2>
</a>
<p>El enunciado del ejercicio de la sesión PE es el siguiente: </p>
<pre><code><span class="hl-2">Desarrolle</span><span class="hl-1"> </span><span class="hl-2">los</span><span class="hl-1"> </span><span class="hl-2">siguientes</span><span class="hl-1"> </span><span class="hl-2">ejercicios</span><span class="hl-1"> </span><span class="hl-2">en</span><span class="hl-1"> </span><span class="hl-2">un</span><span class="hl-1"> </span><span class="hl-2">proyecto</span><span class="hl-1"> </span><span class="hl-2">alojado</span><span class="hl-1"> </span><span class="hl-2">en</span><span class="hl-1"> </span><span class="hl-2">un</span><span class="hl-1"> </span><span class="hl-2">nuevo</span><span class="hl-1"> </span><span class="hl-2">repositorio</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-11">GitHub</span><span class="hl-1">:</span><br/><br/><span class="hl-1">    </span><span class="hl-2">Desarrolle</span><span class="hl-1"> </span><span class="hl-2">un</span><span class="hl-1"> </span><span class="hl-2">cliente</span><span class="hl-1"> </span><span class="hl-2">y</span><span class="hl-1"> </span><span class="hl-2">un</span><span class="hl-1"> </span><span class="hl-2">servidor</span><span class="hl-1"> </span><span class="hl-2">en</span><span class="hl-1"> </span><span class="hl-2">Node</span><span class="hl-1">.</span><span class="hl-2">js</span><span class="hl-1">, </span><span class="hl-2">haciendo</span><span class="hl-1"> </span><span class="hl-2">uso</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">sockets</span><span class="hl-1">, </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">incorporen</span><span class="hl-1"> </span><span class="hl-2">la</span><span class="hl-1"> </span><span class="hl-2">siguiente</span><span class="hl-1"> </span><span class="hl-11">funcionalidad</span><span class="hl-1">:</span><br/><span class="hl-1">        - </span><span class="hl-2">El</span><span class="hl-1"> </span><span class="hl-2">cliente</span><span class="hl-1"> </span><span class="hl-2">debe</span><span class="hl-1"> </span><span class="hl-2">recibir</span><span class="hl-1">, </span><span class="hl-2">desde</span><span class="hl-1"> </span><span class="hl-2">la</span><span class="hl-1"> </span><span class="hl-2">línea</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">comandos</span><span class="hl-1">, </span><span class="hl-2">un</span><span class="hl-1"> </span><span class="hl-2">comando</span><span class="hl-1"> </span><span class="hl-2">Unix</span><span class="hl-1">/</span><span class="hl-2">Linux</span><span class="hl-1">, </span><span class="hl-2">además</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">sus</span><span class="hl-1"> </span><span class="hl-2">argumentos</span><span class="hl-1"> </span><span class="hl-2">correspondientes</span><span class="hl-1">, </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">ejecutaremos</span><span class="hl-1"> </span><span class="hl-2">en</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">servidor</span><span class="hl-1">.</span><br/><span class="hl-1">        - </span><span class="hl-2">El</span><span class="hl-1"> </span><span class="hl-2">servidor</span><span class="hl-1"> </span><span class="hl-2">debe</span><span class="hl-1"> </span><span class="hl-2">recibir</span><span class="hl-1"> </span><span class="hl-2">la</span><span class="hl-1"> </span><span class="hl-2">petición</span><span class="hl-1"> </span><span class="hl-2">del</span><span class="hl-1"> </span><span class="hl-2">cliente</span><span class="hl-1">, </span><span class="hl-2">procesarla</span><span class="hl-1">, </span><span class="hl-2">esto</span><span class="hl-1"> </span><span class="hl-2">es</span><span class="hl-1">, </span><span class="hl-2">ejecutar</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">comando</span><span class="hl-1"> </span><span class="hl-2">solicitado</span><span class="hl-1">, </span><span class="hl-2">y</span><span class="hl-1"> </span><span class="hl-2">devolver</span><span class="hl-1"> </span><span class="hl-2">la</span><span class="hl-1"> </span><span class="hl-2">respuesta</span><span class="hl-1"> </span><span class="hl-2">del</span><span class="hl-1"> </span><span class="hl-2">comando</span><span class="hl-1"> </span><span class="hl-2">al</span><span class="hl-1"> </span><span class="hl-2">cliente</span><span class="hl-1">. </span><span class="hl-2">Para</span><span class="hl-1"> </span><span class="hl-2">ello</span><span class="hl-1">, </span><span class="hl-2">piense</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">comando</span><span class="hl-1"> </span><span class="hl-2">solicitado</span><span class="hl-1"> </span><span class="hl-2">puede</span><span class="hl-1"> </span><span class="hl-2">haberse</span><span class="hl-1"> </span><span class="hl-2">ejecutado</span><span class="hl-1"> </span><span class="hl-2">correctamente</span><span class="hl-1"> </span><span class="hl-2">o</span><span class="hl-1"> </span><span class="hl-2">puede</span><span class="hl-1"> </span><span class="hl-2">haber</span><span class="hl-1"> </span><span class="hl-2">fallado</span><span class="hl-1">, </span><span class="hl-2">por</span><span class="hl-1"> </span><span class="hl-2">ejemplo</span><span class="hl-1">, </span><span class="hl-2">por</span><span class="hl-1"> </span><span class="hl-2">no</span><span class="hl-1"> </span><span class="hl-2">existir</span><span class="hl-1"> </span><span class="hl-2">o</span><span class="hl-1"> </span><span class="hl-2">porque</span><span class="hl-1"> </span><span class="hl-2">se</span><span class="hl-1"> </span><span class="hl-2">le</span><span class="hl-1"> </span><span class="hl-2">han</span><span class="hl-1"> </span><span class="hl-2">pasado</span><span class="hl-1"> </span><span class="hl-2">unos</span><span class="hl-1"> </span><span class="hl-2">argumentos</span><span class="hl-1"> </span><span class="hl-2">no</span><span class="hl-1"> </span><span class="hl-2">válidos</span><span class="hl-1">.</span><br/><span class="hl-1">    </span><span class="hl-2">Trate</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">definir</span><span class="hl-1"> </span><span class="hl-2">pruebas</span><span class="hl-1"> </span><span class="hl-2">con</span><span class="hl-1"> </span><span class="hl-2">Mocha</span><span class="hl-1"> </span><span class="hl-2">y</span><span class="hl-1"> </span><span class="hl-2">Chai</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">comprueben</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">funcionamiento</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">los</span><span class="hl-1"> </span><span class="hl-2">métodos</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">ha</span><span class="hl-1"> </span><span class="hl-2">implementado</span><span class="hl-1">. </span><span class="hl-2">Tenga</span><span class="hl-1"> </span><span class="hl-2">en</span><span class="hl-1"> </span><span class="hl-2">cuenta</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1">, </span><span class="hl-2">lo</span><span class="hl-1"> </span><span class="hl-2">ideal</span><span class="hl-1">, </span><span class="hl-2">es</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">utilice</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">patrón</span><span class="hl-1"> </span><span class="hl-2">callback</span><span class="hl-1"> </span><span class="hl-2">para</span><span class="hl-1"> </span><span class="hl-2">implementar</span><span class="hl-1"> </span><span class="hl-2">dichos</span><span class="hl-1"> </span><span class="hl-2">métodos</span><span class="hl-1">, </span><span class="hl-2">dado</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">lo</span><span class="hl-1"> </span><span class="hl-2">anterior</span><span class="hl-1"> </span><span class="hl-2">facilitará</span><span class="hl-1"> </span><span class="hl-2">el</span><span class="hl-1"> </span><span class="hl-2">desarrollo</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">las</span><span class="hl-1"> </span><span class="hl-2">pruebas</span><span class="hl-1">.</span><br/><span class="hl-1">    </span><span class="hl-2">Incorpore</span><span class="hl-1"> </span><span class="hl-2">un</span><span class="hl-1"> </span><span class="hl-2">flujo</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">GitHub</span><span class="hl-1"> </span><span class="hl-2">que</span><span class="hl-1"> </span><span class="hl-2">ejecute</span><span class="hl-1"> </span><span class="hl-2">sus</span><span class="hl-1"> </span><span class="hl-2">pruebas</span><span class="hl-1"> </span><span class="hl-2">en</span><span class="hl-1"> </span><span class="hl-2">diferentes</span><span class="hl-1"> </span><span class="hl-2">entornos</span><span class="hl-1"> </span><span class="hl-2">con</span><span class="hl-1"> </span><span class="hl-2">diferentes</span><span class="hl-1"> </span><span class="hl-2">versiones</span><span class="hl-1"> </span><span class="hl-2">de</span><span class="hl-1"> </span><span class="hl-2">Node</span><span class="hl-1">.</span><span class="hl-2">js</span><span class="hl-1">.</span>
</code></pre>
<p>Y el código que he desarrollado es el siguiente: </p>
<pre><code class="language-ts"><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1"> &lt; </span><span class="hl-4">3</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Debe introducir un comando como argumento`</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">client</span><span class="hl-1"> = </span><span class="hl-2">net</span><span class="hl-1">.</span><span class="hl-5">connect</span><span class="hl-1">({</span><span class="hl-2">port:</span><span class="hl-1"> </span><span class="hl-4">60301</span><span class="hl-1">});</span><br/><span class="hl-1">    </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">dataJSON</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">message</span><span class="hl-1"> = </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">(</span><span class="hl-2">dataJSON</span><span class="hl-1">.</span><span class="hl-5">toString</span><span class="hl-1">());</span><br/><span class="hl-1">        </span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> === </span><span class="hl-3">&#39;established&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Conexión establecida con el servidor`</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">command</span><span class="hl-1"> = </span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">[</span><span class="hl-4">2</span><span class="hl-1">];</span><br/><span class="hl-1">            </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">args</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">[] = [];</span><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1"> &gt; </span><span class="hl-4">3</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-0">for</span><span class="hl-1">(</span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">i</span><span class="hl-1"> = </span><span class="hl-4">3</span><span class="hl-1">; </span><span class="hl-2">i</span><span class="hl-1"> &lt; </span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1">; ++</span><span class="hl-2">i</span><span class="hl-1">) {</span><br/><span class="hl-1">                    </span><span class="hl-2">args</span><span class="hl-1">.</span><span class="hl-5">push</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">[</span><span class="hl-2">i</span><span class="hl-1">]);</span><br/><span class="hl-1">                }</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">            </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">({</span><span class="hl-3">&#39;command&#39;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-2">command</span><span class="hl-1">, </span><span class="hl-3">&#39;args&#39;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-2">args</span><span class="hl-1">}) + </span><span class="hl-3">&#39;</span><span class="hl-10">\n</span><span class="hl-3">&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        } </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> === </span><span class="hl-3">&#39;salida&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">salida</span><span class="hl-1">);</span><br/><span class="hl-1">        } </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> === </span><span class="hl-3">&#39;error&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">salida</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;end&#39;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Comunicación cerrada&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">}</span>
</code></pre>
<p><em>Código del cliente</em></p>
<pre><code class="language-ts"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-8">MessageEventEmitterServer</span><span class="hl-1"> </span><span class="hl-6">extends</span><span class="hl-1"> </span><span class="hl-8">EventEmitter</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">constructor</span><span class="hl-1">(</span><span class="hl-2">port</span><span class="hl-1">: </span><span class="hl-8">number</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-6">super</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-2">net</span><span class="hl-1">.</span><span class="hl-5">createServer</span><span class="hl-1">((</span><span class="hl-2">connection</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&#39;A client has connected.&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">({</span><span class="hl-3">&#39;type&#39;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&#39;established&#39;</span><span class="hl-1">}));</span><br/><span class="hl-1">      </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">wholeData</span><span class="hl-1"> = </span><span class="hl-3">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">dataChunk</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">wholeData</span><span class="hl-1"> += </span><span class="hl-2">dataChunk</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">messageLimit</span><span class="hl-1"> = </span><span class="hl-2">wholeData</span><span class="hl-1">.</span><span class="hl-5">indexOf</span><span class="hl-1">(</span><span class="hl-3">&#39;</span><span class="hl-10">\n</span><span class="hl-3">&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-0">while</span><span class="hl-1"> (</span><span class="hl-2">messageLimit</span><span class="hl-1"> !== -</span><span class="hl-4">1</span><span class="hl-1">) { </span><br/><span class="hl-1">          </span><span class="hl-2">wholeData</span><span class="hl-1"> = </span><span class="hl-2">wholeData</span><span class="hl-1">.</span><span class="hl-5">substring</span><span class="hl-1">(</span><span class="hl-4">0</span><span class="hl-1">, </span><span class="hl-2">messageLimit</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">wholeData</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-5">emit</span><span class="hl-1">(</span><span class="hl-3">&#39;command&#39;</span><span class="hl-1">, </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">(</span><span class="hl-2">wholeData</span><span class="hl-1">), </span><span class="hl-2">connection</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">messageLimit</span><span class="hl-1"> = </span><span class="hl-2">wholeData</span><span class="hl-1">.</span><span class="hl-5">indexOf</span><span class="hl-1">(</span><span class="hl-3">&#39;</span><span class="hl-10">\n</span><span class="hl-3">&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    }).</span><span class="hl-5">listen</span><span class="hl-1">(</span><span class="hl-2">port</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Waiting for clients to connect.&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>
<p><em>Clase para el servidor, heredando de EventEmitter</em></p>
<pre><code class="language-ts"><span class="hl-2">server</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;command&#39;</span><span class="hl-1">, (</span><span class="hl-2">message</span><span class="hl-1">, </span><span class="hl-2">connection</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Comando a ejecutar </span><span class="hl-6">${</span><span class="hl-2">message</span><span class="hl-12">.</span><span class="hl-2">command</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">command</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">command</span><span class="hl-1">, </span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">args</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-2">command</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;error&#39;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">({</span><span class="hl-3">&#39;type&#39;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&#39;salida&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;salida&#39;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&#39;Error en el comando&#39;</span><span class="hl-1">}))</span><br/><span class="hl-1">    </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">end</span><span class="hl-1">();</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">  </span><span class="hl-2">command</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">content</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1">{</span><br/><span class="hl-1">    </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">({</span><span class="hl-3">&#39;type&#39;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&#39;salida&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;salida&#39;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-2">content</span><span class="hl-1">.</span><span class="hl-5">toString</span><span class="hl-1">()}))</span><br/><span class="hl-1">    </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">end</span><span class="hl-1">();</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">  </span><span class="hl-2">command</span><span class="hl-1">.</span><span class="hl-2">stderr</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">content</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1">{</span><br/><span class="hl-1">    </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">({</span><span class="hl-3">&#39;type&#39;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-3">&#39;error&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;salida&#39;</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-2">content</span><span class="hl-1">.</span><span class="hl-5">toString</span><span class="hl-1">()}))</span><br/><span class="hl-1">    </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">end</span><span class="hl-1">();</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">});</span>
</code></pre>
<p><em>Manejador del evento del servidor</em></p>

<a href="#conclusión" id="conclusión" style="color: inherit; text-decoration: none;">
  <h2>Conclusión</h2>
</a>
<p>En conclusión, en esta prácticas he profundizado más en la creación de una aplicación siguiendo el modelo <code>cliente-servidor</code>. Además, de entender y utilizar la creación de procesos hijos en <code>TypeScript</code>. Sin embargo, la parte de realizar el código de los ficheros asíncrono me ha sido bastante complicada, así como también realizar test para este tipo de código. </p>

<a href="#referencias" id="referencias" style="color: inherit; text-decoration: none;">
  <h2>Referencias</h2>
</a>
<p><a href="https://ull-esit-inf-dsi-2223.github.io/prct10-fs-proc-sockets-funko-app/">1 Guión de la práctica</a></p>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current selected"><a href="modules.html">doc-<wbr/>test</a>
<ul>
<li class="tsd-kind-module"><a href="modules/ejercicio_2_no_pipe_file_info.html">ejercicio-<wbr/>2/no-<wbr/>pipe/file-<wbr/>info</a></li>
<li class="tsd-kind-module"><a href="modules/ejercicio_2_no_pipe_interface.html">ejercicio-<wbr/>2/no-<wbr/>pipe/interface</a></li>
<li class="tsd-kind-module"><a href="modules/ejercicio_2_pipe_file_info_pipe.html">ejercicio-<wbr/>2/pipe/file-<wbr/>info-<wbr/>pipe</a></li>
<li class="tsd-kind-module"><a href="modules/ejercicio_2_pipe_interface.html">ejercicio-<wbr/>2/pipe/interface</a></li>
<li class="tsd-kind-module"><a href="modules/ejercicio_3_cliente_servidor_client.html">ejercicio-<wbr/>3/cliente-<wbr/>servidor/client</a></li>
<li class="tsd-kind-module"><a href="modules/ejercicio_3_cliente_servidor_server.html">ejercicio-<wbr/>3/cliente-<wbr/>servidor/server</a></li>
<li class="tsd-kind-module"><a href="modules/ejercicio_3_funko_funko.html">ejercicio-<wbr/>3/funko/funko</a></li>
<li class="tsd-kind-module"><a href="modules/ejercicio_3_funko_funko_collection.html">ejercicio-<wbr/>3/funko/funko-<wbr/>collection</a></li>
<li class="tsd-kind-module"><a href="modules/modif_client_modif.html">modif/client-<wbr/>modif</a></li>
<li class="tsd-kind-module"><a href="modules/modif_server_modif.html">modif/server-<wbr/>modif</a></li></ul></li></ul></div></details></nav></div></div>
<div class="container tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div><script src="assets/main.js"></script></body></html>